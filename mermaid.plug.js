var mod=(()=>{var i=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var b=(t,e)=>{for(var s in e)i(t,s,{get:e[s],enumerable:!0})},w=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of f(e))!h.call(t,n)&&n!==s&&i(t,n,{get:()=>e[n],enumerable:!(r=y(e,n))||r.enumerable});return t};var x=t=>w(i({},"__esModule",{value:!0}),t);var P={};b(P,{functionMapping:()=>u});function l(t){let e=atob(t),s=e.length,r=new Uint8Array(s);for(let n=0;n<s;n++)r[n]=e.charCodeAt(n);return r}function v(t,e){return syscall("sandboxFetch.fetch",t,e)}function m(){globalThis.fetch=async function(t,e){let s=await v(t,e&&{method:e.method,headers:e.headers,body:e.body});return new Response(s.base64Body?l(s.base64Body):null,{status:s.status,headers:s.headers})}}typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var d=new Map,c=0;function a(t){self.postMessage(t)}self.syscall=async(t,...e)=>await new Promise((s,r)=>{c++,d.set(c,{resolve:s,reject:r}),a({type:"sys",id:c,name:t,args:e})});function p(t,e){self.addEventListener("message",s=>{(async()=>{let r=s.data;switch(r.type){case"inv":{let n=t[r.name];if(!n)throw new Error(`Function not loaded: ${r.name}`);try{let o=await Promise.resolve(n(...r.args||[]));a({type:"invr",id:r.id,result:o})}catch(o){console.error(o),a({type:"invr",id:r.id,error:o.message})}}break;case"sysr":{let n=r.id,o=d.get(n);if(!o)throw Error("Invalid request id");d.delete(n),r.error?o.reject(new Error(r.error)):o.resolve(r.result)}break}})().catch(console.error)}),a({type:"manifest",manifest:e})}m();function g(t){return{html:`<pre class="mermaid">${t.replaceAll("<","&lt;")}</pre>`,script:`
    loadJsByUrl("https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.min.js").then(() => {
      mermaid.init().then(updateHeight);
    });
    document.addEventListener("click", () => {
      api({type: "blur"});
    });
    `}}var u={mermaidWidget:g},M={name:"mermaid",version:.1,imports:["https://get.silverbullet.md/global.plug.json"],functions:{mermaidWidget:{path:"./mermaid.ts:widget",codeWidget:"mermaid"}},assets:{}};p(u,M);return x(P);})();
